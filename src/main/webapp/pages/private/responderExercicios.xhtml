<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="../../templates/private/layout.xhtml">
	<ui:define name="content">
		<p:panel id="panel">
			<h1>Responder Exercícios</h1>
			<p:separator />

			<h:panelGrid>
				<h3>Pesquisar Exercício</h3>

				<h:form id="exerciciosPesquisaForm">
					<p:growl id="growlPesquisa" autoUpdate="true" />

					<h:panelGrid>
						<h:panelGrid columns="2">
							<h:panelGrid>
								<p:outputLabel for="apelidoDoProfessorPesquisaInputText"
									value="Apelido do professor" />
								<p:inputText id="apelidoDoProfessorPesquisaInputText"
									value="#{responderExercicioBean.apelidoDoProfessorPesquisa}" />
							</h:panelGrid>

							<h:panelGrid>
								<p:outputLabel for="emailDoProfessorPesquisaInputText"
									value="E-mail do professor" />
								<p:inputText id="emailDoProfessorPesquisaInputText"
									value="#{responderExercicioBean.emailDoProfessorPesquisa}" />
							</h:panelGrid>
						</h:panelGrid>

						<p:commandButton id="pesquisarCommandButton" value="Pesquisar"
							actionListener="#{responderExercicioBean.pesquisar}"
							update="exerciciosDataTable, growlPesquisa" />

						<p:dataTable id="exerciciosDataTable" style="width: 950px"
							value="#{responderExercicioBean.exercicios}" var="exercicio"
							emptyMessage="Nenhum exercício encontrado!" paginator="true"
							rows="10" rowsPerPageTemplate="5, 10, 15"
							paginatorPosition="bottom">

							<f:facet name="header">
            					Exercícios
        					</f:facet>

							<p:column headerText="Nome" width="700">
								<h:outputText value="#{exercicio.nomeFormatado}" />
							</p:column>

							<p:column headerText="Data de vencimento" width="130">
								<h:outputText value="#{exercicio.dataDeVencimentoFormatada}" />
							</p:column>

							<p:column headerText="Responder">
								<div align="center">
									<ui:remove>
										<p:commandLink
											actionListener="#{responderExercicioBean.responder(exercicio)}"
											update=":formRespostas, :formRespostaMultiplaEscolha, :formRespostaDissertativa, :formRespostaVouF">

											<p:graphicImage
												url="https://s3-us-west-2.amazonaws.com/educservicebucket/images/edit.png"
												width="20" height="20" />
										</p:commandLink>
									</ui:remove>

									<p:commandLink
										actionListener="#{responderExercicioBean.responder(exercicio)}"
										update="@all">

										<p:graphicImage
											url="https://s3-us-west-2.amazonaws.com/educservicebucket/images/edit.png"
											width="20" height="20" />
									</p:commandLink>
								</div>
							</p:column>
						</p:dataTable>
					</h:panelGrid>
				</h:form>

				<p:panel id="panelRespostas">
					<h:form id="formRespostas">
						<p:growl autoUpdate="true" />

						<h:panelGrid columns="3">
							<div align="center">
								<h3 style="width: 800px;">#{responderExercicioBean.questao.nome}</h3>
							</div>

							<p:commandButton value="Próxima" update="@all"
								actionListener="#{responderExercicioBean.proximaQuestao}"
								rendered="#{responderExercicioBean.renderizarBotaoProximo}"
								style="width : 100px; height: 50px;" />
						</h:panelGrid>
					</h:form>

					<p:panel id="panelDeResponderQuestaoMultiplaEscolha"
						rendered="#{responderExercicioBean.renderizarQuestaoDeMultiplaEscolha}">
						<h:form id="formRespostaMultiplaEscolha">
							<p:growl id="growlME" autoUpdate="true" />

							<div align="center">
								<h3 style="width: 700px;">#{responderExercicioBean.questaoDeMultiplaEscolha.questao.enunciado}</h3>
							</div>

							<h:panelGrid columns="1" cellpadding="5">
								<h3>Escolha uma alternativa</h3>
								<p:dataTable id="radioDT" var="alt"
									value="#{responderExercicioBean.questaoDeMultiplaEscolha.alternativas}"
									selection="#{responderExercicioBean.alternativaDeQuestaoDeMultiplaEscolha}"
									rowKey="#{alt.id}" style="width: 800px;">

									<p:column selectionMode="single"
										style="width:16px;text-align:center" />

									<p:column headerText="Descrição">
										<h:outputText value="#{alt.descricao}" />
									</p:column>
								</p:dataTable>

								<p:commandButton value="Responder" update="@all"
									action="#{responderExercicioBean.responderQuestaoDeMultiplaEscolha}" />
							</h:panelGrid>
						</h:form>
					</p:panel>

					<p:panel id="panelDeResponderQuestaoDissertativa"
						rendered="#{responderExercicioBean.renderizarQuestaoDissertativa}">
						<h:form id="formRespostaDissertativa">
							<p:growl id="growlD" autoUpdate="true" />

							<div align="center">
								<h3 style="width: 700px;">#{responderExercicioBean.questaoDissertativa.questao.enunciado}</h3>
							</div>
							
							<p:spacer width="1" height="3"/>

							<h:panelGrid>
								<h3>Insira a resposta</h3>
								<p:inputTextarea autoResize="false"
									style="width: 800px; height: 50px" required="true"
									requiredMessage="Solução é obrigatório!"
									value="#{responderExercicioBean.solucaoDeQuestaoDissertativa}" />

								<p:commandButton value="Responder" update="@all"
									action="#{responderExercicioBean.responderQuestaoDissertativa}" />
							</h:panelGrid>
						</h:form>
					</p:panel>

					<p:panel id="panelDeResponderQuestaoVerdadeiroOuFalso"
						rendered="#{responderExercicioBean.renderizarQuestaoDeVouF}">
						<h:form id="formRespostaVouF">
							<p:growl id="growlVF" autoUpdate="true" />

							<div align="center">
								<h3 style="width: 700px;">#{responderExercicioBean.questaoVouF.questao.enunciado}</h3>
							</div>

							<p:spacer width="1" height="5" />

							<h:panelGrid columns="1" cellpadding="5">
								<h3>Selecione as opções corretas</h3>
								<p:dataTable id="checkboxDT" var="alternativa"
									value="#{responderExercicioBean.questaoVouF.alternativas}"
									rowKey="#{alternativa.id}"
									selection="#{responderExercicioBean.respostasAlternativasVouFSelecionadas}"
									style="width: 800px;">

									<p:column selectionMode="multiple"
										style="width:16px;text-align:center" />

									<p:column headerText="Descrição">
										<h:outputText value="#{alternativa.alternativa}" />
									</p:column>
								</p:dataTable>

								<p:commandButton value="Responder" update="@all"
									action="#{responderExercicioBean.responderQuestaoDeVouF}" />
							</h:panelGrid>
						</h:form>
					</p:panel>
				</p:panel>
			</h:panelGrid>
		</p:panel>
	</ui:define>
</ui:composition>
</html>